#!/bin/bash

export $(grep -v '^#' .env | xargs)

ACCESS_TOKEN="eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJHOTV2ajMtZDlJQ0otNEJuZ09iUkY2MVlpNzBMR01jQkpuZklISmFoRkFJIn0.eyJleHAiOjE3NTc2MDU1ODMsImlhdCI6MTc1NzYwNTI4MywianRpIjoiZjkwYWIzNzEtZTNmNS00N2UwLWJlODctZWNmYjEyODcxNjJmIiwiaXNzIjoiaHR0cHM6Ly9rZXljbG9hay5kZXZvcHMubmFwYmlvdGVjLmlvL2F1dGgvcmVhbG1zL29uaXgtdjItZGV2IiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjhmMzZlNDlmLTljM2MtNGFjMi05MTdiLTBlN2I0ZDIyZWUzNiIsInR5cCI6IkJlYXJlciIsImF6cCI6InBsZWFzZS1zY2FuIiwic2Vzc2lvbl9zdGF0ZSI6ImUzYmNjNmNhLTRjNzctNGVkNy04ZGRkLTI1OTBmMDg2NzkzYiIsImFjciI6IjEiLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsib2ZmbGluZV9hY2Nlc3MiLCJkZWZhdWx0LXJvbGVzLW9uaXgtdjItZGV2IiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIG9mZmxpbmVfYWNjZXNzIiwic2lkIjoiZTNiY2M2Y2EtNGM3Ny00ZWQ3LThkZGQtMjU5MGYwODY3OTNiIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU2V1YnBvbmcgTW9uc2FyIiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2V1YnBvbmcubW9uIiwiZ2l2ZW5fbmFtZSI6IlNldWJwb25nIiwiZmFtaWx5X25hbWUiOiJNb25zYXIiLCJlbWFpbCI6InBqYW1lLmZiQGdtYWlsLmNvbSJ9.mTy6hETa300UEoSaN-uExmvJls2cOruEGP5SOr6rwPdgR-hLjVwng2_BhmLgsxmHIccdTaOf75KX3M3bkmk0cCjkwynV9CE9jVI2avlG0-Qu7cG1NPpbvH1U8a0w5E2_TEB4Fvx_jWJ45sOaU2FidLBg8vp_pACe0ckRWKUOtUDW6GTIJH3yhxRKEbkxNGhYRjGjBkel97JOZhT_xReQmX03Gefqw7pKGpIgt7XeXcnHR4N0M5pY-1H9LPZI3VgYU285-jD4FoZT54unPvtk_9N3sUVjEZ5GHn5lqfULjDI1ZPFLBODS2AHPQU5Rpm-WRqQoTSjgeSdv_e_yFDvp0w"
ACCESS_TOKEN_B64=$(echo -n "${ACCESS_TOKEN}" | base64 -w0)

#curl -s -X GET ${API_HTTP_ENDPOINT}/api/Organization/org/${API_ORG}/action/GetUserAllowedOrg \
#-H "Content-Type: application/json" -v -u "dummy:${API_KEY}"

curl -s -X GET ${API_HTTP_ENDPOINT}/api/Organization/org/${API_ORG}/action/GetUserAllowedOrg \
-H "Content-Type: application/json" -v \
-H "Authorization: Bearer ${ACCESS_TOKEN_B64}"
