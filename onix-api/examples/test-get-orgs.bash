#!/bin/bash

export $(grep -v '^#' .env | xargs)

ACCESS_TOKEN="eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJHOTV2ajMtZDlJQ0otNEJuZ09iUkY2MVlpNzBMR01jQkpuZklISmFoRkFJIn0.eyJleHAiOjE3NTg3OTQyOTYsImlhdCI6MTc1ODc5Mzk5NiwianRpIjoiNTQxZmU2M2ItZmZiMS00NzkyLThjZjktNmY1MDE2MjM4Y2E4IiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLXByb2R1Y3Rpb24taHR0cC5rZXljbG9hay5zdmMuY2x1c3Rlci5sb2NhbC9hdXRoL3JlYWxtcy9vbml4LXYyLWRldiIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiIwYmE2ZmQ4MS1iMTI1LTRlOTgtODRjNS03OTc0NzQ0ZGI4MmMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJwbGVhc2Utc2NhbiIsInNlc3Npb25fc3RhdGUiOiI2MDc2MDE3MS1hNDNiLTRiNTQtOGUyNS02OTQ1ODc4ZjExNTciLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwiZGVmYXVsdC1yb2xlcy1vbml4LXYyLWRldiIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCBvZmZsaW5lX2FjY2VzcyIsInNpZCI6IjYwNzYwMTcxLWE0M2ItNGI1NC04ZTI1LTY5NDU4NzhmMTE1NyIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwibmFtZSI6IlBqYW1lIFBsZWFzZS1TY2FuIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicGphbWUxNiIsImdpdmVuX25hbWUiOiJQamFtZSIsImxvY2FsZSI6ImVuIiwiZmFtaWx5X25hbWUiOiJQbGVhc2UtU2NhbiIsImVtYWlsIjoicGphbWUxNi5mYkBnbWFpbC5jb20ifQ.WFKsdOUBAZSfYYJpXxCGniyZvvkFvjKI4DcXAkdFyDhs6B4E26HEBQeuHcucRZ6v96N65pP4oB-2i5riYlWMzgdepbBVONvEgRk6ZH6iLj1HTGIdSlAMU1yxxtRy-f7r77SDWb6JI56YyKGJoZ9kMVEA7Lkbo5qNRms5oLWx7OW1QNsxmWgGpi28X3OE_G6QL7Sdj3eG_H0G3-hVzgS5hWphNcnlb84ObU9m23OXolIfTc8cIgZoRAX4J54HMiF96NuQ9b5XOND7oh-TQTw--Z1Skng7G6ka58ZF8swAX-kClg0xHQNuY8Qg19ovRer9H1NXft8qnCHYlz2rrYVZKg"
ACCESS_TOKEN_B64=$(echo -n "${ACCESS_TOKEN}" | base64 -w0)

#curl -s -X GET ${API_HTTP_ENDPOINT}/api/Organization/org/${API_ORG}/action/GetUserAllowedOrg \
#-H "Content-Type: application/json" -v -u "dummy:${API_KEY}"

curl -s -X GET ${API_HTTP_ENDPOINT}/api/Organization/org/temp/action/GetUserAllowedOrg \
-H "Content-Type: application/json" -v \
-H "Authorization: Bearer ${ACCESS_TOKEN_B64}"
