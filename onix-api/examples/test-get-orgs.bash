#!/bin/bash

export $(grep -v '^#' .env | xargs)

ACCESS_TOKEN="eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIyMTV5VkM4V3ZidFctbVJBZEtwMEQ5M2p1aExWem9xNHEtUmZsbmI2b1A0In0.eyJleHAiOjE3NTc2NTc3NzYsImlhdCI6MTc1NzY1NzQ3NiwianRpIjoiZGQyYTFmYmQtZGViYS00Yjg1LWIwNzYtNWMwMWQ3ZTBjNWQ5IiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLXByb2R1Y3Rpb24taHR0cC5rZXljbG9hay5zdmMuY2x1c3Rlci5sb2NhbC9hdXRoL3JlYWxtcy9vbml4LXYyLXByb2QiLCJhdWQiOiJhY2NvdW50Iiwic3ViIjoiNjZjZDJhMTgtOWZiZS00MzIxLWIzZDEtNTZiYThjZjA2NzA4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoicGxlYXNlLXNjYW4iLCJzZXNzaW9uX3N0YXRlIjoiYjExZWM2M2YtOTI2Ni00N2EyLTk5ZjQtMmQzNGFjNWQ1MjY5IiwiYWNyIjoiMSIsInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJkZWZhdWx0LXJvbGVzLW9uaXgtdjItcHJvZCIsIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBvZmZsaW5lX2FjY2VzcyBwcm9maWxlIGVtYWlsIiwic2lkIjoiYjExZWM2M2YtOTI2Ni00N2EyLTk5ZjQtMmQzNGFjNWQ1MjY5IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU2V1YnBvbmcgTW9uc2FyIiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2V1YnBvbmcubW9uIiwiZ2l2ZW5fbmFtZSI6IlNldWJwb25nIiwiZmFtaWx5X25hbWUiOiJNb25zYXIiLCJlbWFpbCI6InBqYW1lLmZiQGdtYWlsLmNvbSJ9.b0cjuE8Jh-FsF94zw5C28ZSoQWZ0ENruiB_1y2shFO5xyaOkJ9Fml_eRRmjHK4oydm5OSh2vs3rbCa9UyIED6pWU7WnL7NRnXVhqQcEu6A46ddtsyu9IF2tltI_BwyAWrdHFcVcv6eC_gZsFHKp9HG5k94UiMKluVgxmnY3ZavHX-CVweMCjZM8nxsmKxQXJ1auuwQ9FGv9rkttfcjvzLLpH600EMbP9iCqm_k9GeM1PwiC_xw4vYXXBv0ELORC7-oVzt8HDlpJL57Wph9JbJOdNOAZJlPnfRwyvsjsSE213XZEXSNAQDL23CUghdXg7uSMxg4qt-MxcMq55BC9J0A"
ACCESS_TOKEN_B64=$(echo -n "${ACCESS_TOKEN}" | base64 -w0)

#curl -s -X GET ${API_HTTP_ENDPOINT}/api/Organization/org/${API_ORG}/action/GetUserAllowedOrg \
#-H "Content-Type: application/json" -v -u "dummy:${API_KEY}"

curl -s -X GET ${API_HTTP_ENDPOINT}/api/Organization/org/${API_ORG}/action/GetUserAllowedOrg \
-H "Content-Type: application/json" -v \
-H "Authorization: Bearer ${ACCESS_TOKEN_B64}"
