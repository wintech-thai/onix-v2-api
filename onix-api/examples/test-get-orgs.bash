#!/bin/bash

export $(grep -v '^#' .env | xargs)

ACCESS_TOKEN="eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJHOTV2ajMtZDlJQ0otNEJuZ09iUkY2MVlpNzBMR01jQkpuZklISmFoRkFJIn0.eyJleHAiOjE3NTg1OTcyMzgsImlhdCI6MTc1ODU5NjkzOCwianRpIjoiZTQ1NjJjMDYtZGNhOC00MzJlLWIxOTMtNWFmZjE1NGVmZjljIiwiaXNzIjoiaHR0cHM6Ly9rZXljbG9hay5kZXZvcHMubmFwYmlvdGVjLmlvL2F1dGgvcmVhbG1zL29uaXgtdjItZGV2IiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjVjMTVjMjJiLWQwMTctNDhmYy1hYmE1LWQwYzNlZDNlNGI4OCIsInR5cCI6IkJlYXJlciIsImF6cCI6InBsZWFzZS1zY2FuIiwic2Vzc2lvbl9zdGF0ZSI6IjVjMDQyNTkwLTZmY2EtNDAzZi05OWZmLWUyMWU3ZjhhMjQxMiIsImFjciI6IjEiLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsib2ZmbGluZV9hY2Nlc3MiLCJkZWZhdWx0LXJvbGVzLW9uaXgtdjItZGV2IiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIG9mZmxpbmVfYWNjZXNzIiwic2lkIjoiNWMwNDI1OTAtNmZjYS00MDNmLTk5ZmYtZTIxZTdmOGEyNDEyIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiUGphbWUgUGxlYXNlLVNjYW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJwamFtZW5hamExNCIsImdpdmVuX25hbWUiOiJQamFtZSIsImZhbWlseV9uYW1lIjoiUGxlYXNlLVNjYW4iLCJlbWFpbCI6InBqYW1lMTQuZmJAZ21haWwuY29tIn0.JZhjy-IOS5VPHfAilHomA2n9aciWm5uZ0EShq7kjtDQkR-rrZBag4V5_Ap8-Ach1PM-4880V9KKlrkcB4BUTEo408W-Xoll7dKJ6KF4iCpGaEyMCQpwmmKJPPEFVddikzy3CSNrhzqSTAfDaTqSSuUBg8RZjH9n_VIX7bV1ZTINXX2kDLm4xRzvC4bSLx2uAVp0cLhUSVaiOeqGVUyIAbG6c-8eeTEvw-iH1pwuIubmnBy0a4F8JiSmEVjQ1Rhq1vFjQq7o9TcPikiTm3sOOTOoEvs-A5nwjFsNaAb1FtTaKXETrDrxdHleZSqHVG0JLhG1nRqAiYGd-8R5NWEjzIg"
ACCESS_TOKEN_B64=$(echo -n "${ACCESS_TOKEN}" | base64 -w0)

#curl -s -X GET ${API_HTTP_ENDPOINT}/api/Organization/org/${API_ORG}/action/GetUserAllowedOrg \
#-H "Content-Type: application/json" -v -u "dummy:${API_KEY}"

curl -s -X GET ${API_HTTP_ENDPOINT}/api/Organization/org/temp/action/GetUserAllowedOrg \
-H "Content-Type: application/json" -v \
-H "Authorization: Bearer ${ACCESS_TOKEN_B64}"
