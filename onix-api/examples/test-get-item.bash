#!/bin/bash

export $(grep -v '^#' .env | xargs)

ACCESS_TOKEN="eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJHOTV2ajMtZDlJQ0otNEJuZ09iUkY2MVlpNzBMR01jQkpuZklISmFoRkFJIn0.eyJleHAiOjE3NTkyMzkxNDUsImlhdCI6MTc1OTIzODg0NSwianRpIjoiMjdiYTAwZmEtOThlMi00YzFlLWI3YTItNGFkMzE5ZWMwMjAwIiwiaXNzIjoiaHR0cHM6Ly9rZXljbG9hay5kZXZvcHMubmFwYmlvdGVjLmlvL2F1dGgvcmVhbG1zL29uaXgtdjItZGV2IiwiYXVkIjoiYWNjb3VudCIsInN1YiI6ImQ1YWRhYjZmLTU1ODYtNGE3OC1iYTg5LWFiMGY5MGI1ZTk0MCIsInR5cCI6IkJlYXJlciIsImF6cCI6InBsZWFzZS1zY2FuIiwic2Vzc2lvbl9zdGF0ZSI6IjI5NDZmZjhiLTY2OTYtNDc4Yi04ZWRjLWQ4MjUwOGMwNGY5YiIsImFjciI6IjEiLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsib2ZmbGluZV9hY2Nlc3MiLCJkZWZhdWx0LXJvbGVzLW9uaXgtdjItZGV2IiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIG9mZmxpbmVfYWNjZXNzIiwic2lkIjoiMjk0NmZmOGItNjY5Ni00NzhiLThlZGMtZDgyNTA4YzA0ZjliIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiUGphbWUgUGxlYXNlLVNjYW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJwamFtZTE1IiwiZ2l2ZW5fbmFtZSI6IlBqYW1lIiwibG9jYWxlIjoiZW4iLCJmYW1pbHlfbmFtZSI6IlBsZWFzZS1TY2FuIiwiZW1haWwiOiJwamFtZTE1LmZiQGdtYWlsLmNvbSJ9.lW5bDJvCYcKil6N4Not-YPvbeiG_A2eTDKww-3Ag5mOQHyfUYGhANQq6xPAIx-3yBDv-_SDno_Ae15WvJyTmSjQJg6iZB9mwZHCIsxJ96JBJtAIYMLH4XkGFUvJ0Lwiw2dp9C3SbHMe76JPOR7IAb7qo4pS7kRMQ0SI3SXjFwdFK_0U500ssTZtqI3WDTxLZbHkku-UsAbNRquGhmVrvManTW56p0qkntOMvujUKNdqorXVSB6ZG9nck6vbtQAavGQ-58zZhWc-whYg5OAUsVOFmgJoSE02IqxlAFU1e6es7ddTkZZzfjHlMNA_P83mSl6pDfNUElvYjiaRr8Vfiow"
ACCESS_TOKEN_B64=$(echo -n "${ACCESS_TOKEN}" | base64 -w0)

curl -s -X POST ${API_HTTP_ENDPOINT}/api/Item/org/pjame15/action/GetItemCount \
-H "Content-Type: application/json" -v \
-H "Authorization: Bearer ${ACCESS_TOKEN_B64}" \
-d '{}'
